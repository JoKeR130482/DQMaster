<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Проект - DQMaster</title>
    <link rel="icon" href="/static/favicon.ico" type="image/svg+xml">
    <link rel="stylesheet" href="/static/styles.css?v=1.2">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="main-container">
        <!-- Project Header -->
        <header class="project-header">
            <div class="project-header-title">
                <a href="/" class="back-link" title="К списку проектов"><i data-lucide="arrow-left"></i></a>
                <h1 id="project-name-header">Загрузка...</h1>
            </div>
            <div class="project-header-actions">
                <div class="form-group-checkbox" style="margin-bottom: 0;">
                    <input type="checkbox" id="auto-revalidate-toggle">
                    <label for="auto-revalidate-toggle">Авто-перепроверка</label>
                </div>
                <button id="validate-btn" class="btn btn-success">
                    <i data-lucide="play"></i>
                    <span>Запустить проверку</span>
                </button>
                <button id="save-project-btn" class="btn btn-primary">
                    <i data-lucide="save"></i>
                    <span>Сохранить проект</span>
                </button>
            </div>
        </header>

        <main id="project-workspace">
            <div id="loading" class="loading-spinner" style="display: none;"></div>
            <div id="error-container" class="error-container" style="display: none;"></div>

            <!-- Files Section -->
            <section class="files-section">
                <div class="section-header">
                    <h2>Файлы проекта</h2>
                    <button id="show-upload-form-btn" class="btn btn-primary">
                        <i data-lucide="plus"></i>
                        <span>Добавить файл</span>
                    </button>
                </div>
                <div id="upload-form-container" class="upload-form-container" style="display: none;">
                    <input type="file" id="file-input" accept=".xlsx, .xls" class="file-input">
                    <label for="file-input" class="file-label">Выберите .xlsx или .xls файл</label>
                    <button id="cancel-upload-btn" class="btn btn-secondary">Отмена</button>
                </div>
                <div id="files-list-container" class="files-list-container">
                    <!-- File cards will be injected here -->
                </div>
            </section>

            <!-- Validation Progress Section -->
            <section id="validation-progress-container" class="results-section" style="display: none;">
                <!-- Content will be injected by project.js -->
            </section>

            <!-- Validation Results Section -->
            <section id="validation-results-container" class="results-section" style="display: none;">
                 <div class="section-header">
                    <h2>Результаты проверки</h2>
                </div>
                <div id="golden-record-stats"></div>
                <div id="summary-results"></div>
                <div id="detailed-results"></div>
            </section>

        </main>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="toast"></div>

    <!-- Rule Editor Modal -->
    <div id="rule-editor-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="rule-modal-title">Настройка правила</h3>
                <button id="close-rule-modal-btn" class="btn btn-icon"><i data-lucide="x"></i></button>
            </div>
            <div class="modal-body">
                <form id="rule-editor-form">
                    <!-- Dynamic form fields will be injected here -->
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancel-rule-modal-btn" class="btn btn-secondary">Отмена</button>
                <button id="save-rule-btn" type="submit" form="rule-editor-form" class="btn btn-primary">Сохранить</button>
            </div>
        </div>
    </div>

    <script src="/static/js/project.js"></script>
    <script>lucide.createIcons();</script>
</body>
</html>